(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{210:function(e,t,n){e.exports=n.p+"static/media/nav-logo.95664742.png"},211:function(e,t,n){},259:function(e,t,n){e.exports=n.p+"static/media/fogg-logged-out-1.81182dc8.png"},278:function(e,t,n){e.exports=n(589)},468:function(e,t,n){},589:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"userSignInWatchSaga",function(){return R}),n.d(a,"userSignOutWatchSaga",function(){return D}),n.d(a,"watchSetUpUserSaga",function(){return T});var r={};n.r(r),n.d(r,"loadOfficeUsersWatchSaga",function(){return V});var l=n(1),c=n.n(l),i=n(9),s=n.n(i),o=n(30),u=n(73),p=n(275),m=n(90),f=n(32),d=n.n(f),h=n(21),g="SIGN_IN_USER",E="SIGN_IN_USER_SUCCESS",b="SIGN_IN_USER_ERROR",y="SIGN_OUT_USER",O="SIGN_OUT_USER_SUCCESS",v="SIGN_OUT_USER_ERROR",j="SET_UP_USER",U="SET_UP_USER_SUCCESS",S="SET_UP_USER_ERROR",k="LOAD_OFFICE_USER",w="LOAD_OFFICE_USER_SUCCESS",I="LOAD_OFFICE_USER_ERROR",L=function(e){return e.general.firebase},_=d.a.mark(R),x=d.a.mark(D),C=d.a.mark(T),A=d.a.mark(G),P=d.a.mark(B),N=d.a.mark(q);function R(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)(g,G);case 2:case"end":return e.stop()}},_,this)}function D(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)(y,B);case 2:case"end":return e.stop()}},x,this)}function T(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)(j,q);case 2:case"end":return e.stop()}},C,this)}function F(e,t){var n=e.email||null,a=e.password||null;return t.auth.signInWithEmailAndPassword(n,a).catch(function(e){throw e})}function G(e){var t;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(h.c)(L);case 3:return t=n.sent,n.next=6,Object(h.a)(F,e.payload,t);case 6:return n.sent,console.log("SIGN IN CALL SUCCESSFUL"),n.next=10,Object(h.b)({type:E});case 10:n.next=17;break;case 12:return n.prev=12,n.t0=n.catch(0),console.error(n.t0),n.next=17,Object(h.b)({type:b,payload:{error:n.t0}});case 17:case"end":return n.stop()}},A,this,[[0,12]])}function M(e){return e.auth.signOut().catch(function(e){throw e})}function B(e){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h.c)(L);case 3:return t=e.sent,e.next=6,Object(h.a)(M,t);case 6:return e.sent,console.log("SIGN OUT CALL SUCCESSFUL"),e.next=10,Object(h.b)({type:O});case 10:e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.next=17,Object(h.b)({type:v,payload:{error:e.t0}});case 17:case"end":return e.stop()}},P,this,[[0,12]])}function z(e,t){var n=e.uid||null;return t.functions.httpsCallable("getUserInfo")({uid:n}).then(function(e){return console.log(e),e})}function q(e){var t,n,a;return d.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(h.c)(L);case 3:return t=r.sent,r.next=6,Object(h.a)(z,e.payload,t);case 6:return n=r.sent,a=n.data,console.log("workerSetUpUserSaga - got response"),r.next=11,Object(h.b)({type:U,payload:{data:a}});case 11:r.next=18;break;case 13:return r.prev=13,r.t0=r.catch(0),console.error(r.t0),r.next=18,Object(h.b)({type:S,payload:{error:r.t0}});case 18:case"end":return r.stop()}},N,this,[[0,13]])}n(144);var W=n(23),K=function e(t){Object(W.a)(this,e);var n=t.uid||null;if(null===n)return null;var a=t.name||null,r=t.building||null,l=t.floor||null,c=t.roomNo||null;this.uid=n,this.name=a,this.building=r,this.floorNo=l,this.roomNo=c},H=function e(t){Object(W.a)(this,e);var n=t.uid||null;if(null===n)return null;var a=t.firstName||null,r=t.lastName||null,l=t.email||null,c=t.type||null,i=t.offices||null;this.uid=n,this.name=a+" "+r,this.email=l,this.type=c;var s=[];for(var o in i){var u=new K(i[o]);u&&s.push(u)}this.offices=s},J=d.a.mark(V),X=d.a.mark(Y);function V(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)(k,Y);case 2:case"end":return e.stop()}},J,this)}function Z(e,t){var n=e.officeUID||null,a=t.functions.httpsCallable("getAllUsersForOffice");return console.log(n),console.log("loadOfficeUsers"),a({officeUID:n}).then(function(e){console.log("loadOfficeUsers success: "+e);var t=e.data,n=[];for(var a in t){var r=t[a],l=new H(r)||null;null!==l&&n.push(l)}return n})}function Y(e){var t,n;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(h.c)(L);case 3:return t=a.sent,a.next=6,Object(h.a)(Z,e.payload,t);case 6:return n=a.sent,console.log(n),a.next=10,Object(h.b)({type:w,payload:{userList:n}});case 10:a.next=17;break;case 12:return a.prev=12,a.t0=a.catch(0),console.error(a.t0),a.next=17,Object(h.b)({type:I,payload:{error:a.t0}});case 17:case"end":return a.stop()}},X,this,[[0,12]])}n(144);var $=Object(m.a)({},a,r);var Q=function(e,t){return Object(m.a)({},e,t)},ee={isLoading:!1,error:null,firebase:null,currentPage:null},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_UP_FIREBASE":console.log("reducers/general.js - SET_UP_FIREBASE");var n=t.payload.firebase;return Q(e,{firebase:n});case g:return Q(e,{isLoading:!0});case E:return Q(e,{isLoading:!1,error:null});case b:var a=t.payload.error||null;return Q(e,{isLoading:!1,error:a});case j:return Q(e,{isLoading:!0});case U:return Q(e,{isLoading:!1,error:null});case y:return Q(e,{isLoading:!0,error:null});case O:case v:return Q(e,{isLoading:!1,error:null});case S:var r=t.payload.error||null;return Q(e,{isLoading:!1,error:r});case k:return Q(e,{isLoading:!0});case w:return Q(e,{isLoading:!1,error:null});case I:var l=t.payload.error||null;return Q(e,{isLoading:!1,error:l});case"CHANGE_PAGE":var c=t.payload||null;return Q(e,Object(m.a)({},c));default:return e}},ne={currentOfficeAdminUID:"qGTShTzLuOI3uDXXNM6J",userList:[],isLoadingUserData:!1},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Q(e,{isLoadingUserData:!0});case w:var n=t.payload.userList||null;return Q(e,{userList:n,isLoadingUserData:!1});case I:return Q(e,{isLoadingUserData:!1})}return e},re={user:null,type:null,adminOfficeList:null,regularUserPortalMode:"admin"},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return re;case g:case S:break;case U:var n=t.payload.data||null,a=n.type||null,r=n.officeAdmin||null;return Q(e,{user:n,type:a,adminOfficeList:r});case S:return Q(e,{user:null});default:return e}return e},ce=Object(u.c)({general:te,auth:le,officeAdmin:ae}),ie=Object(p.a)(),se=Object(u.a)(ie),oe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,ue=Object(u.e)(ce,oe(se));!function(e){for(var t in $)e.run($[t])}(ie);var pe=ue,me=n(35),fe=n(37),de=n(36),he=n(38),ge=n(257),Ee=n.n(ge),be=n(258),ye=n.n(be),Oe=(n(92),function(e){function t(){var e,n;Object(W.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(fe.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={current:null},n.handleClick=function(e){},n}return Object(he.a)(t,e),Object(me.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(Ee.a,{position:"static",style:{background:"transparent"}},c.a.createElement(ye.a,{container:!0,justify:"center",alignItems:"center"},c.a.createElement("img",{style:{marginTop:15,marginBottom:15,height:40,width:200},src:n(210)}))))}}]),t}(c.a.Component)),ve=Object(o.b)(null,null)(Oe),je=n(594),Ue=n(363),Se=n(372),ke=n(593),we=n(596),Ie=n(18),Le=n(188),_e=n(255),xe=n(259),Ce=n.n(xe),Ae=(n(211),function(e){function t(){var e,n;Object(W.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(fe.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){if(!e){var a=t.emailAddress||null,r=t.password||null;n.props.signInUser(a,r)}})},n}return Object(he.a)(t,e),Object(me.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return c.a.createElement(je.a,{className:"login-card"},c.a.createElement(Ue.a,null,c.a.createElement(Se.a,{span:12},c.a.createElement(je.a,{cover:c.a.createElement("img",{alt:"example",src:Ce.a}),bordered:!1})),c.a.createElement(Se.a,{span:12},c.a.createElement(je.a,{bordered:!1},c.a.createElement(ke.a,{onSubmit:this.handleSubmit,className:"login-form"},c.a.createElement(ke.a.Item,null,e("emailAddress",{rules:[{required:!0,message:"Please input your email address!",whitespace:!0,pattern:/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/}]})(c.a.createElement(we.a,{prefix:c.a.createElement(Ie.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email Address"}))),c.a.createElement(ke.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!",whitespace:!0}]})(c.a.createElement(we.a,{prefix:c.a.createElement(Ie.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),c.a.createElement(ke.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(c.a.createElement(Le.a,{className:""},"Remember me")),c.a.createElement("a",{className:"login-form-forgot airspaceColor",href:""},"Forgot password?"),c.a.createElement(_e.a,{type:"primary",htmlType:"submit",className:"login-form-button airspace-submit-button"},"Log in")))))))}}]),t}(c.a.Component)),Pe=ke.a.create({name:"normal_login"})(Object(o.b)(null,function(e){return{signInUser:function(t,n){return e(function(e,t){return{type:g,payload:{email:e,password:t}}}(t,n))}}})(Ae)),Ne=function(e){function t(){return Object(W.a)(this,t),Object(fe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(me.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(ve,null),c.a.createElement(Ue.a,{type:"flex",justify:"space-around",align:"middle"},c.a.createElement(Se.a,null,c.a.createElement(Pe,null))))}}]),t}(c.a.Component),Re=Object(o.b)(function(e){return{error:e.general.error,isLoading:e.general.isLoading}},null)(Ne),De=n(590),Te=n(254),Fe=function(e){function t(){var e,n;Object(W.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(fe.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={current:null},n.handleSignOut=function(e){n.props.signOutUser()},n.handleProfileClick=function(e){switch(e.key){case"Edit Profile":console.log("Implement Edit Profile");break;case"SignOut":console.log("Made it here")}},n.handleClick=function(e){console.log("click ",e),"signout"==e.key&&n.handleSignOut(e),"notifications"==e.key&&console.log("Implement Notifications")},n}return Object(he.a)(t,e),Object(me.a)(t,[{key:"render",value:function(){var e=c.a.createElement(De.a,{onClick:this.handleClick},c.a.createElement(De.a.Item,{key:"Edit Profile"},c.a.createElement("a",null,"Edit Profile")),c.a.createElement(De.a.Divider,null),c.a.createElement(De.a.Item,{key:"signout"},c.a.createElement("a",null,"Sign Out")));return c.a.createElement(Ue.a,null,c.a.createElement(Se.a,{span:24},c.a.createElement(De.a,{onClick:this.handleClick,mode:"horizontal",style:{textAlign:"right",border:0}},c.a.createElement(De.a.Item,{key:"notifications"},c.a.createElement(Ie.a,{type:"bell"})),c.a.createElement(De.a.Item,{key:"profile"},c.a.createElement(Te.a,{overlay:e,trigger:["click"]},c.a.createElement("a",{className:"ant-dropdown-link",href:"#"},c.a.createElement(Ie.a,{type:"smile"})))))))}}]),t}(c.a.Component),Ge=Object(o.b)(null,function(e){return{signOutUser:function(){return e({type:y,payload:{}})}}})(Fe),Me=function(e,t){switch(e){case"userPageOfficeAdmin":return Be();default:return{}}},Be=function(){return{currentPage:"userPageOfficeAdmin"}},ze=(n(468),De.a.SubMenu),qe=De.a.ItemGroup,We=function(e){function t(){var e,n;Object(W.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(fe.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){var t=e.key,a=Me(t);n.props.changePage(a)},n}return Object(he.a)(t,e),Object(me.a)(t,[{key:"render",value:function(){return"regular"!=this.props.userType?null:"admin"==this.props.regularUserPortalMode?c.a.createElement(De.a,{onClick:this.handleClick,style:{border:0},defaultSelectedKeys:["1"],mode:"inline",className:"airspace-side-nav-bar"},c.a.createElement("img",{style:{height:30,width:200,paddingLeft:30},className:"logo-nav-image",src:n(210)}),c.a.createElement(qe,{key:"g2",title:"",className:"airspace-side-nav-bar-group"},c.a.createElement(De.a.Item,{key:"home"},c.a.createElement("span",null,c.a.createElement(Ie.a,{type:"home"}),c.a.createElement("span",null,"Home"))),c.a.createElement(De.a.Item,{key:"userPageOfficeAdmin"},c.a.createElement("span",null,c.a.createElement(Ie.a,{type:"user"}),c.a.createElement("span",null,"Users"))),c.a.createElement(De.a.Item,{key:"conferenceRooms"},c.a.createElement("span",null,c.a.createElement(Ie.a,{type:"user"}),c.a.createElement("span",null,"Conference Rooms"))),c.a.createElement(De.a.Item,{key:"hotDesks"},c.a.createElement("span",null,c.a.createElement(Ie.a,{type:"user"}),c.a.createElement("span",null,"Hot Desks"))),c.a.createElement(De.a.Item,{key:"serviceRequests"},c.a.createElement("span",null,c.a.createElement(Ie.a,{type:"user"}),c.a.createElement("span",null,"Service Requests"))),c.a.createElement(De.a.Item,{key:"registeredGuests"},c.a.createElement("span",null,c.a.createElement(Ie.a,{type:"user"}),c.a.createElement("span",null,"Registered Guests"))),c.a.createElement(ze,{key:"sub1",title:c.a.createElement("span",null,c.a.createElement(Ie.a,{type:"up-square"}),c.a.createElement("span",null,"My Offices"))},c.a.createElement(qe,{key:"g1",title:"Offices"},["Polsky North","Polsky South","Booth 205"].map(function(e){return c.a.createElement(De.a.Item,{key:e},e)}))))):"regular"==this.props.regularUserPortalMode?c.a.createElement(De.a,{onClick:this.handleClick,style:{width:256,height:100,border:0},defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],mode:"inline"},c.a.createElement(De.a.Item,{key:"1"},c.a.createElement("span",null,c.a.createElement(Ie.a,{type:"meh"}),c.a.createElement("span",null,"Implement Other Users")))):void 0}}]),t}(c.a.Component),Ke=Object(o.b)(function(e){return{user:e.auth.user,userType:e.auth.type,adminOfficeList:e.auth.adminOfficeList,regularUserPortalMode:e.auth.regularUserPortalMode}},function(e){return{changePage:function(t){return e(function(e){return{type:"CHANGE_PAGE",payload:e}}(t))}}})(We),He=n(597),Je=n(592),Xe=n(270),Ve=n.n(Xe),Ze=n(271),Ye=n.n(Ze),$e=[{title:"Name",dataIndex:"name",sorter:function(e,t){var n=e.name,a=t.name;return n<a?-1:n>a?1:0},sortDirections:["descend","ascend"]},{title:"Email",dataIndex:"email"},{title:"Offices",dataIndex:"offices",render:function(e){return c.a.createElement("span",null,e.map(function(e){return c.a.createElement(He.a,{color:"blue",key:e.uid},e.name)}))}},{title:"Type",dataIndex:"type",filters:[{text:"Admin",value:"admin"},{text:"Regular",value:"regular"}],render:function(e){return c.a.createElement("span",null,c.a.createElement(He.a,{color:"blue",key:e},e))},filterMultiple:!0,onFilter:function(e,t){return 0===t.type.indexOf(e)}},{title:"",key:"more",render:function(){return c.a.createElement(Ve.a,null,c.a.createElement(Ye.a,null))}}],Qe=function(e){function t(){var e,n;Object(W.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(fe.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={searchText:""},n}return Object(he.a)(t,e),Object(me.a)(t,[{key:"componentDidMount",value:function(){this.props.loadUserList(this.props.currentOfficeUID)}},{key:"render",value:function(){return c.a.createElement(Je.a,{rowKey:function(e){return e.uid.toString()},columns:$e,dataSource:this.props.userList,pagination:!1,loading:this.props.isLoadingUserData})}}]),t}(c.a.Component),et=Object(o.b)(function(e){return{userList:e.officeAdmin.userList,currentOfficeUID:e.officeAdmin.currentOfficeAdminUID,isLoadingUserData:e.officeAdmin.isLoadingUserData}},function(e){return{loadUserList:function(t){return e(function(e){return{type:k,payload:{officeUID:e}}}(t))}}})(Qe),tt=function(e){function t(){return Object(W.a)(this,t),Object(fe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(me.a)(t,[{key:"render",value:function(){return c.a.createElement(Ue.a,null,c.a.createElement(Se.a,{className:"wide-table",span:24},c.a.createElement("div",null,c.a.createElement("h1",null,"Users"),c.a.createElement(_e.a,{className:"right-button",type:"primary"},"Add User")),c.a.createElement(et,null)))}}]),t}(c.a.Component),nt=Object(o.b)(null,null)(tt),at=n(111),rt=n.n(at),lt=(n(588),n(144),{apiKey:"AIzaSyBPUBLiY-FCuqpJLVibdr-RoiUt4wzbaLE",authDomain:"airspace-management-app.firebaseapp.com",databaseURL:"https://airspace-management-app.firebaseio.com",projectId:"airspace-management-app",storageBucket:"airspace-management-app.appspot.com",messagingSenderId:"927508779333"}),ct=function e(){Object(W.a)(this,e),rt.a.apps.length||rt.a.initializeApp(lt),this.auth=rt.a.auth(),this.functions=rt.a.functions()},it=function(e){function t(){return Object(W.a)(this,t),Object(fe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(me.a)(t,[{key:"componentWillMount",value:function(){null===this.props.firebase&&(this.firebase=new ct,this.props.setUpFirebase(this.firebase))}},{key:"componentDidMount",value:function(){var e=this.firebase||null;if(e){console.log("firebase SET UP in App.js render()");var t=this.props;this.listener=e.auth.onAuthStateChanged(function(e){if(!e)return console.log("auth listener did NOT find user"),void t.setUpUser(null);console.log("auth listener found user"),t.setUpUser(e.uid)})}else console.log("firebase NOT set up in App.js render()")}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"renderPageContent",value:function(e){switch(e){case"userPageOfficeAdmin":return c.a.createElement(nt,null);default:return null}}},{key:"render",value:function(){return this.props.user?c.a.createElement("div",null,c.a.createElement(Ue.a,null,c.a.createElement(Se.a,{span:4},c.a.createElement(Ke,null)),c.a.createElement(Se.a,{span:20},c.a.createElement(Ge,null),this.renderPageContent(this.props.currentPage)))):c.a.createElement(Re,null)}}]),t}(l.Component),st=Object(o.b)(function(e){return{user:e.auth.user,isLoading:e.general.isLoading,error:e.general.error,firebase:e.general.firebase,currentPage:e.general.currentPage}},function(e){return{setUpFirebase:function(t){return e(function(e){return{type:"SET_UP_FIREBASE",payload:{firebase:e}}}(t))},setUpUser:function(t){return e(function(e){return{type:j,payload:{uid:e}}}(t))}}})(it),ot=n(595),ut=c.a.createElement(ot.a,null,c.a.createElement(o.a,{store:pe},c.a.createElement(st,null)));s.a.render(ut,document.getElementById("root"))},92:function(e,t,n){}},[[278,2,1]]]);
//# sourceMappingURL=main.9e68caad.chunk.js.map